{"remainingRequest":"/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/node_modules/babel-loader/lib/index.js!/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/src/views/Search.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/src/views/Search.vue","mtime":1633447475161},{"path":"/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9mYXJlcy9Eb2N1bWVudHMva2VuemEvcmVjb21tYW5kYXRpb24tc3lzdGVtLWFwcC9nb3VyYXlhLWUtY29tbWVyY2UvZnJvbnQtZW5kLXZ1ZWpzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgUHJvZHVjdEJveCBmcm9tICdAL2NvbXBvbmVudHMvUHJvZHVjdEJveC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NlYXJjaCcsCiAgY29tcG9uZW50czogewogICAgUHJvZHVjdEJveDogUHJvZHVjdEJveAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaGVkUHJvZHVjdHM6IFtdLAogICAgICBwcm9kdWN0czogW10sCiAgICAgIHF1ZXJ5OiAnJwogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICdTZWFyY2ggfCBHb3VyYXlhIEUtY29tbWVyY2UnOwogICAgdmFyIHVyaSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpOwogICAgdmFyIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModXJpKTsKCiAgICBpZiAocGFyYW1zLmdldCgncXVlcnknKSkgewogICAgICB0aGlzLnF1ZXJ5ID0gcGFyYW1zLmdldCgncXVlcnknKTsKICAgICAgdGhpcy5wZXJmb3JtU2VhcmNoKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBwZXJmb3JtU2VhcmNoOiBmdW5jdGlvbiBwZXJmb3JtU2VhcmNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJc0xvYWRpbmcnLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidGVzdCIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS92MS9wcm9kdWN0cy9zZWFyY2gvJywgewogICAgICAgICAgICAgICAgICAncXVlcnknOiBfdGhpcy5xdWVyeQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMucHJvZHVjdHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcmlkIikpOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vIHByb2R1Y3QgZm91bmQgIScpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXJjaGVkUHJvZHVjdHMucHVzaChfdGhpcy5xdWVyeSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VhcmNoZWRQcm9kdWN0cyIpID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2VhcmNoZWRQcm9kdWN0cyIsIF90aGlzLnF1ZXJ5KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInNlYXJjaGVkUHJvZHVjdHMiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VhcmNoZWRQcm9kdWN0cyIpLmNvbmNhdCgnLCcpLmNvbmNhdChfdGhpcy5xdWVyeSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJc0xvYWRpbmcnLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/fares/Documents/kenza/recommandation-system-app/gouraya-e-commerce/front-end-vuejs/src/views/Search.vue"],"names":[],"mappings":";;;;;;;;;AAkBA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,UAAP,MAAuB,6BAAvB;AAGA,eAAe;AACX,EAAA,IAAI,EAAE,QADK;AAEX,EAAA,UAAU,EAAE;AACR,IAAA,UAAS,EAAT;AADQ,GAFD;AAKX,EAAA,IALW,kBAKJ;AACH,WAAO;AACH,MAAA,gBAAgB,EAAE,EADf;AAEH,MAAA,QAAQ,EAAE,EAFP;AAGH,MAAA,KAAK,EAAE;AAHJ,KAAP;AAKH,GAXU;AAYX,EAAA,OAZW,qBAYD;AACN,IAAA,QAAQ,CAAC,KAAT,GAAiB,6BAAjB;AAEA,QAAI,GAAE,GAAI,MAAM,CAAC,QAAP,CAAgB,MAAhB,CAAuB,SAAvB,CAAiC,CAAjC,CAAV;AACA,QAAI,MAAK,GAAI,IAAI,eAAJ,CAAoB,GAApB,CAAb;;AAEA,QAAI,MAAM,CAAC,GAAP,CAAW,OAAX,CAAJ,EAAyB;AACrB,WAAK,KAAL,GAAa,MAAM,CAAC,GAAP,CAAW,OAAX,CAAb;AAEA,WAAK,aAAL;AACJ;AACH,GAvBU;AAwBX,EAAA,OAAO,EAAE;AACC,IAAA,aADD,2BACiB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAClB,gBAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,cAAnB,EAAmC,IAAnC;;AACA,gBAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;AAFkB;AAAA,uBAGZ,KAAI,CACL,IADC,CACI,0BADJ,EACgC;AAAC,2BAAS,KAAI,CAAC;AAAf,iBADhC,EAED,IAFC,CAEI,UAAA,QAAO,EAAK;AACd,kBAAA,KAAI,CAAC,QAAL,GAAgB,QAAQ,CAAC,IAAzB;AACA,kBAAA,OAAO,CAAC,GAAR,CAAY,YAAY,CAAC,OAAb,CAAqB,QAArB,CAAZ;;AAEA,sBAAI,QAAQ,CAAC,IAAT,CAAc,MAAd,KAAyB,CAA7B,EAA+B;AAC7B,oBAAA,OAAO,CAAC,GAAR,CAAY,oBAAZ;AACF,mBAFA,MAGK;AACH,oBAAA,KAAI,CAAC,gBAAL,CAAsB,IAAtB,CAA2B,KAAI,CAAC,KAAhC;;AACA,wBAAI,YAAY,CAAC,OAAb,CAAqB,kBAArB,MAA6C,IAAjD,EAAsD;AAClD,sBAAA,YAAY,CAAC,OAAb,CAAqB,kBAArB,EAAwC,KAAI,CAAC,KAA7C;AACJ,qBAFA,MAGK;AACH,sBAAA,YAAY,CAAC,OAAb,CAAqB,kBAArB,EAAwC,YAAY,CAAC,OAAb,CAAqB,kBAArB,EAAyC,MAAzC,CAAgD,GAAhD,EAAqD,MAArD,CAA4D,KAAI,CAAC,KAAjE,CAAxC;AACF;AACF;AACH,iBAlBC,WAmBK,UAAA,KAAI,EAAK;AACZ,kBAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACH,iBArBC,CAHY;;AAAA;AAyBlB,gBAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,cAAnB,EAAmC,KAAnC;;AAzBkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BtB;AA5BK;AAxBE,CAAf","sourcesContent":["<template>\n    <div class=\"page-search\">\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h1 class=\"title\">Search</h1>\n\n                <h2 class=\"is-size-5 has-text-grey\">Search term: \"{{ query }}\"</h2>\n            </div>\n\n            <ProductBox \n                v-for=\"product in products\"\n                v-bind:key=\"product.id\"\n                v-bind:product=\"product\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport ProductBox from '@/components/ProductBox.vue'\n\n\nexport default {\n    name: 'Search',\n    components: {\n        ProductBox\n    },\n    data() {\n        return {\n            searchedProducts: [],\n            products: [],\n            query: ''\n        }\n    },\n    mounted() {\n        document.title = 'Search | Gouraya E-commerce'\n\n        let uri = window.location.search.substring(1)\n        let params = new URLSearchParams(uri)\n\n        if (params.get('query')) {\n            this.query = params.get('query')\n\n            this.performSearch()\n        }\n    },\n    methods: {\n        async performSearch() {\n            this.$store.commit('setIsLoading', true)\n            console.log(\"test\")\n            await axios\n                .post('/api/v1/products/search/', {'query': this.query})\n                .then(response => {\n                    this.products = response.data\n                    console.log(localStorage.getItem(\"userid\"))\n\n                    if (response.data.length === 0){\n                      console.log('no product found !')\n                    }\n                    else {\n                      this.searchedProducts.push(this.query)\n                      if (localStorage.getItem(\"searchedProducts\") === null){\n                          localStorage.setItem(\"searchedProducts\",this.query)\n                      }\n                      else {\n                        localStorage.setItem(\"searchedProducts\",localStorage.getItem(\"searchedProducts\").concat(',').concat(this.query))\n                      }\n                    }\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n            this.$store.commit('setIsLoading', false)\n\n        }\n    }\n}\n</script>\n"],"sourceRoot":""}]}